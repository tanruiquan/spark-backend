(this.webpackJsonpspark=this.webpackJsonpspark||[]).push([[0],{36:function(e,t,n){},422:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(85),s=n(55),r=n(25),o=n(196),i=n(197),l=(n(36),n(3)),u=n(7),j=n(10),b=n.p+"static/media/Logo_conversations.9105b769.svg",d=n(47),O=n(45),h=n(0),m=function(e){var t=e.action,n=Object(j.f)(),c=void 0===t?function(){n.goBack()}:t;return Object(h.jsxs)("div",{className:"menu__linkbutton--back",onClick:c,children:[Object(h.jsx)(d.a,{icon:O.b})," back"]})},f=function(e){var t="game"===e.mode?"game":"profile";return Object(h.jsxs)("div",{className:"navbar ".concat(t,"__navbar"),children:[Object(h.jsxs)("div",{className:"game__navbar--back",children:[" ",Object(h.jsx)(m,{})," "]}),Object(h.jsx)("img",{src:b,className:"site__sparklogo game__navbar--logo",alt:"SPARK logo"})]})},p=function(e){var t=e.title,n=e.subtitle,c=e.action,a=c;return Object(h.jsxs)("div",{className:"menu__linkbutton selectable",onClick:a,children:[Object(h.jsxs)("span",{className:"menu__linkbutton--title",children:[" ",t," "]})," ",Object(h.jsx)("br",{}),Object(h.jsxs)("span",{className:"menu__linkbutton--subtitle",children:[" ",n," "]})]})},x=n(6),v=n(121),g=n(15),_=function(){return JSON.parse(localStorage.getItem("favs"))||[]},y={shuffle:function(e){var t,n,c;for(c=e.length-1;c>0;c--)t=Math.floor(Math.random()*(c+1)),n=e[c],e[c]=e[t],e[t]=n;return e},timestampToMM:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][new Date(e).getMonth()-1]},timestampToString:function(e){function t(e){return e<10&&(e="0"+e),e}var n=new Date(e),c=n.getDate(),a=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()-1],s=n.getFullYear(),r="".concat(t(n.getHours()),":").concat(t(n.getMinutes()));return"".concat(c," ").concat(a," ").concat(s,", ").concat(r)},writeToFavs:function(e){var t=_();t.push(e),localStorage.setItem("favs",JSON.stringify(t))},toggleFromFavs:function(e){var t=_(),n=t.findIndex((function(t){return t.id===e.id}));-1===n?t.push(e):t.splice(n,1),localStorage.setItem("favs",JSON.stringify(t))},isInFavs:function(e){return-1!=_().findIndex((function(t){return t.id===e.id}))},readFavsFromStorage:_,checkSoloReady:function(){if(JSON.parse(localStorage.getItem("solo"))){var e=new Date(JSON.parse(localStorage.getItem("solo"))),t=new Date(Date.now());return e.getDate()!==t.getDate()&&e.getfullMonth()!==t.getfullMonth()&&e.getfullYear()!==t.getfullYear()}return!0},setSoloTimestamp:function(){var e=Date.now();localStorage.setItem("solo",JSON.stringify(e))},writeSoloReflection:function(e){var t=Date.now(),n={question:e.question,reflection:e.reflection,picture:e.picture||!1,timestamp:t},c=JSON.parse(localStorage.getItem("reflection"))||[];localStorage.setItem("reflection",JSON.stringify([].concat(Object(g.a)(c),[n])))}},N=function(e){var t=e.data,n=e.isFavoritible,a=void 0===n||n,s=e.color,r=e.displayToast,o=e.mode,i=Object(c.useState)(!1),u=Object(l.a)(i,2),j=u[0],b=u[1],m=Object(c.useState)(v.a),f=Object(l.a)(m,2),p=f[0],x=f[1],g=Object(c.useState)(null),_=Object(l.a)(g,2),N=_[0],S=_[1],k=Object(c.useState)("Loading question..."),w=Object(l.a)(k,2),E=w[0],C=w[1];Object(c.useEffect)((function(){if(null==N&&S(s),"this-or-that"===o){var e=[t.this,t.that];y.shuffle(e),C("".concat(e[0]," or ").concat(e[1],"?"))}else C(t.question)}),[]);var T=function(e){e.preventDefault(),y.toggleFromFavs(t),r(j?"Removed from favourites":"Added to favourites"),b(!j)},q=function(){navigator.share?navigator.share({title:"SPARK Meaningful Conversations",text:E}).catch((function(e){return console.log("Error sharing",e)})):navigator.clipboard.writeText(E).then((function(){r("Copied question to clipboard! Share it with your friends!")}))};Object(c.useEffect)((function(){b(y.isInFavs(t))}),[]),Object(c.useEffect)((function(){x(j?O.d:v.a)}),[j]);return Object(h.jsx)("div",{className:"game__question-card--content-container",children:0===Object.keys(t).length?null:Object(h.jsxs)("div",{className:"game__question-card --".concat(N),children:[Object(h.jsxs)("p",{className:"game__question-card--title disable--select",children:[" ",E," "]}),a?Object(h.jsxs)("div",{className:"game__question-card--icons-container disable--select",children:[Object(h.jsx)(d.a,{icon:p,className:"game__question-card--icon",size:"3x",onClick:T,onTouchEnd:T,title:j?"Remove from favourites":"Add to favourites"}),Object(h.jsx)(d.a,{icon:O.c,className:"game__question-card--icon",size:"3x",onClick:q,onTouchEnd:q,title:"Share"})]}):Object(h.jsx)("p",{children:" "})]})})},S=n(4),k=n.n(S),w=n(12),E=n(24),C=n.n(E),T="/api/pictures",q={getPictureFromUnsplash:function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(T,"/random"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pictureByTopic:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(T,"/topic/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pictureByTopicCount:function(){var e=Object(w.a)(k.a.mark((function e(t,n){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(T,"/topic/").concat(t,"/").concat(n));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pictureByQueryCount:function(){var e=Object(w.a)(k.a.mark((function e(t,n){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(T,"/query/").concat(t,"/").concat(n));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},I=function(e){var t=e.pictures,n=e.isSelectable,a=void 0!==n&&n,s=e.handleSelect,r=Object(c.useState)(null),o=Object(l.a)(r,2),i=o[0],u=o[1],j=function(){null==i?alert("You did not select!"):s(i)},b=function(e,t){e.preventDefault(),null===i||i.id!=t.id?u(t):u(null)};return 0===t.length?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"card__picture--gallery",children:t.map((function(e){return Object(h.jsx)("div",{className:"card__picture--container ".concat(a?"selectable":""," \n                ").concat(i&&i.id==e.id?"selected":""),onTouchEnd:function(t){return b(t,e)},onMouseUp:function(t){return b(t,e)},children:Object(h.jsx)("img",{src:e.urls.small,alt:e.alt_description,className:"card__picture--thumb ".concat(1===t.length?"card__picture--solo":"")})},e.id)}))}),Object(h.jsx)("div",{children:a?Object(h.jsx)("button",{onClick:j,className:"input--button --amethyst selectable",children:" Select "}):null})]})},F=function(e){var t=e.topic,n=e.data,a=e.isActive,s=e.mode,r=e.isSelectable,o=void 0!==r&&r,i=e.handleSelect,u=Object(c.useState)([]),j=Object(l.a)(u,2),b=j[0],d=j[1],O=Object(c.useState)("Loading question..."),m=Object(l.a)(O,2),f=m[0],p=m[1];Object(c.useEffect)(Object(w.a)(k.a.mark((function e(){var c,a,r,o,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.this){e.next=13;break}return c=[n.this,n.that],y.shuffle(c),"this-or-that"===s&&p("".concat(c[0]," or ").concat(c[1],"?")),e.next=6,q.pictureByQueryCount(n.this,1);case 6:return a=e.sent,e.next=9,q.pictureByQueryCount(n.that,1);case 9:r=e.sent,d([].concat(Object(g.a)(a),Object(g.a)(r))),e.next=28;break;case 13:if(!n.pic){e.next=17;break}d([n.pic]),e.next=28;break;case 17:if("online"!==s){e.next=24;break}return e.next=20,q.pictureByTopicCount(t,2);case 20:o=e.sent,d(Object(g.a)(o)),e.next=28;break;case 24:return e.next=26,q.pictureByTopicCount(t,5);case 26:i=e.sent,d(Object(g.a)(i));case 28:p(n.question);case 29:case"end":return e.stop()}}),e)}))),[]);return Object(h.jsxs)("div",{className:"card__picture ".concat(a?"active":"inactive"," ").concat(o?"":"disable--select"),children:[Object(h.jsx)("div",{style:{margin:"20px"},children:Object(h.jsxs)("p",{className:"card__picture--question",children:[" ",f," "]})}),0===Object.keys(b).length?null:Object(h.jsx)(I,{pictures:b,isSelectable:o,handleSelect:i})]})},R=function(e){var t=e.data,n=e.displayToast,a=e.submitHandler,s=["jade","topaz","amethyst","amber"],r=Object(c.useState)(""),o=Object(l.a)(r,2),i=o[0],u=o[1],j=Object(c.useState)(s[Math.floor(Math.random()*s.length)]),b=Object(l.a)(j,2),d=b[0],O=(b[1],Object(c.useState)(null)),m=Object(l.a)(O,2),f=m[0],p=m[1],v=Object(c.useState)(null),g=Object(l.a)(v,2),_=g[0],y=g[1],S=function(e){u(e.target.value)},k=function(e){e.preventDefault(),""==i?n("Please write out a reflection!"):(a({reflection:i,picture:f||null}),u(""),n("Response Submitted!"))},w=function(){return Object(h.jsxs)("div",{className:"solo__input--form",children:[_?Object(h.jsx)("div",{className:"solo__input--pic",children:Object(h.jsx)(F,{data:f,mode:"solo",isActive:!0},"p")}):null,Object(h.jsx)("h1",{className:"solo__input--title",children:"Reflection"}),Object(h.jsx)("textarea",{value:i,onChange:S,spellCheck:"false",className:"textarea--solid"}),Object(h.jsx)("button",{onClick:k,onTouchEnd:k,className:"input--button selectable end --".concat(d),children:" Save "})]})};return Object(h.jsx)("div",{className:"solo__input",children:t.canPicture?Object(h.jsx)(h.Fragment,{children:_?w():Object(h.jsx)(F,{topic:t.topic,data:t,isActive:!0,mode:"solo",isSelectable:!0,handleSelect:function(e){y(e),t=Object(x.a)(Object(x.a)({},t),{},{pic:Object(x.a)({},e)}),p(t)}})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{data:t,isFavoritible:!0,displayToast:n,color:d,mode:"solo"}),w()]})})},M="/api/questions",D={getAllQuestions:function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(M);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAllQuestionsFromCategory:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/questions/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getQuestionsFromCategory:function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,a,s,r,o,i,l,u,j,b,d,O,h,m=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(M,"/").concat(t,"/1"));case 2:return n=e.sent,e.next=5,C.a.get("".concat(M,"/").concat(t,"/2"));case 5:return c=e.sent,e.next=8,C.a.get("".concat(M,"/").concat(t,"/3"));case 8:for(a=e.sent,s=[],r=m.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=m[i];return l=[].concat(o),u=l[0],j=l[1],b=l[2],u&&(d=y.shuffle(n.data).slice(0,u),s=[].concat(Object(g.a)(s),Object(g.a)(d))),j&&(O=y.shuffle(c.data).slice(0,j),s=[].concat(Object(g.a)(s),Object(g.a)(O))),b&&(h=y.shuffle(a.data).slice(0,b),s=[].concat(Object(g.a)(s),Object(g.a)(h))),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSoloQuestions:function(){var e=Object(w.a)(k.a.mark((function e(){var t,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/questions/solo/1");case 2:return t=e.sent,n=[2,2,2,2,3][Math.floor(5*Math.random())],e.next=6,C.a.get("/api/questions/solo/"+n);case 6:return c=e.sent,t=y.shuffle(t.data).slice(0,2),c=c.data[Math.floor(Math.random()*c.data.length)],e.abrupt("return",[].concat(Object(g.a)(t),[c]));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},A="CHECK_SOLO_READY",J="IS_READY",P="IS_UNREADY",Q="FETCH_SOLO_QUESTIONS_SUCCESS",U="FETCH_SOLO_QUESTIONS_FAILURE",Y="FETCH_JOURNEY",H="THROW_ERROR",G={soloReady:!0,loading:!1,hasErrors:!1,journey:[],questions:[]};var L=function(){return{type:A}},W=function(){return{type:H}};function B(){return function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(L());try{n=y.checkSoloReady(),t(n?{type:J}:{type:P})}catch(c){t(W())}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function K(){return function(e){e(L());try{var t=JSON.parse(localStorage.getItem("reflection"))||[];e({type:Y,payload:t})}catch(n){e(W())}}}var z=Object(r.b)((function(e){return{loading:e.solo.loading,questions:e.solo.questions,hasErrors:e.solo.hasErrors}}))((function(e){var t=e.dispatch,n=e.loading,a=e.questions,s=e.hasErrors,r=e.displayToast,o=Object(c.useState)(0),i=Object(l.a)(o,2),u=i[0],j=i[1];Object(c.useEffect)((function(){t(function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(L()),e.prev=1,localStorage.getItem("solo_questions")){e.next=9;break}return e.next=5,D.getSoloQuestions();case 5:n=e.sent,localStorage.setItem("solo_questions",JSON.stringify(n)),e.next=10;break;case 9:n=JSON.parse(localStorage.getItem("solo_questions"));case 10:t({type:Q,payload:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:U});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()),j(Number(localStorage.getItem("solo_index")))}),[t]);var b=function(e){y.writeSoloReflection({question:a[u].question,reflection:e.reflection,picture:e.picture||null}),j(u+1),localStorage.setItem("solo_index",(u+1).toString()),u+1==a.length&&y.setSoloTimestamp()};return n?Object(h.jsx)("p",{children:" loading "}):s?Object(h.jsx)("p",{children:" error :( "}):a?u==a.length?Object(h.jsx)("p",{children:" That's all the questions for today! Your responses are saved in your Journey. "}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(R,{data:a[u],displayToast:r,submitHandler:b},u)}):Object(h.jsx)("p",{children:" fatal error "})})),V=n(40),X=Object(r.b)((function(e){return{soloReady:e.solo.soloReady,loading:e.solo.loading,hasError:e.solo.hasError}}))((function(e){var t=e.dispatch,n=e.soloReady,a=(e.loading,e.hasError,Object(c.useState)("menu")),s=Object(l.a)(a,2),r=s[0],o=s[1];Object(c.useEffect)((function(){t(B())}),[t]);var i=function(){o("game")},j=function(e){Object(V.b)(e,{position:"top",duration:1500})};return Object(h.jsxs)("div",{className:"solo",children:["menu"===r?Object(h.jsxs)("div",{className:"solo__welcome",children:[Object(h.jsx)("p",{className:"card__picture--question",children:" Welcome to Solo mode! "}),Object(h.jsxs)("p",{children:[" Every day, you'll receive 3 thought provoking questions. Write down answers that will be saved to your personal ",Object(h.jsx)(u.b,{className:"text__link",to:"/profile",children:" Journey "})," "]}),Object(h.jsxs)("p",{children:[" ",Object(h.jsx)("strong",{children:"NOTE:"})," We do not store any of your data on servers. It is all stored in your local browser storage. "]}),n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:" Hit start to begin! "}),Object(h.jsx)(p,{title:"Start",action:i})]}):Object(h.jsx)("p",{children:" You have completed all 3 questions today! Come back tomorrow. "})]}):"game"===r?Object(h.jsx)(z,{displayToast:j}):void 0,Object(h.jsx)(V.a,{}),Object(h.jsx)(f,{})]})})),Z=n(125),$=function(e){var t=e.questions,n=e.mode,a=e.isFavoritible,s=e.displayToast,r=Object(c.useState)([]),o=Object(l.a)(r,2),i=o[0],u=o[1],j=Object(c.useState)(0),b=Object(l.a)(j,2),d=b[0],O=b[1],m=["topaz","amber","amethyst","jade"];Object(c.useEffect)((function(){u(t.slice(0,5)),f()}),[]);var f=function(){O(d+1);var e=d+5>=t.length?t.length:d+5;u(t.slice(d,e))},p={background:"transparent",border:"none",overflow:"visible",height:"auto",maxWidth:"800px"};return Object(h.jsx)(Z.b,{className:"game__question-card--container",children:i.map((function(e,t){return Object(h.jsx)(Z.a,{onSwipe:f,style:p,children:e.canPicture?Object(h.jsx)(F,{topic:e.topic,data:e,isActive:0===t,mode:n}):Object(h.jsx)(N,{data:e,isFavoritible:a,displayToast:s,color:m[Math.floor(Math.random()*m.length)],mode:n})},e.id)}))})},ee="GET_QUESTION",te="GET_QUESTION_SUCCESS",ne="GET_QUESTION_FAILURE",ce=function(){return{type:ee}},ae=function(e){return{type:te,payload:e}},se=function(){return{type:ne}};var re=n.p+"static/media/mode_deep.04293f89.svg",oe=n.p+"static/media/mode_icebreakers.a35ce8ea.svg",ie=n.p+"static/media/mode_thisorthat.e728f6b4.svg",le=Object(r.b)((function(e){return{loading:e.questions.loading,questions:e.questions.questions,hasErrors:e.questions.hasErrors}}))((function(e){var t=e.dispatch,n=e.loading,a=e.questions,s=e.hasErrors,r=e.mode;Object(c.useEffect)((function(){var e;t((e=r,function(){var t=Object(w.a)(k.a.mark((function t(n){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(ce()),t.prev=1,"favourites"!==e){t.next=8;break}return t.next=5,y.readFavsFromStorage();case 5:c=t.sent,t.next=11;break;case 8:return t.next=10,D.getAllQuestionsFromCategory(e);case 10:c=t.sent;case 11:n(ae(c)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n(se());case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]);var o=function(e){Object(V.b)(e,{position:"top",duration:1500})};return Object(h.jsxs)("div",{children:[n?Object(h.jsxs)("div",{className:"flex-center",children:[" ",Object(h.jsx)("p",{children:" Loading game... "})," "]}):s?Object(h.jsxs)("div",{className:"flex-center",children:[" ",Object(h.jsx)("p",{children:" An error occured. Please try again. "})," "]}):Object(h.jsx)($,{questions:y.shuffle(a),mode:r,isFavoritible:!0,displayToast:o}),function(){switch(r){case"deep":return Object(h.jsx)("img",{src:re,className:"modeicon"});case"icebreakers":return Object(h.jsx)("img",{src:oe,className:"modeicon"});case"this-or-that":return Object(h.jsx)("img",{src:ie,className:"modeicon"});default:return null}}(),Object(h.jsx)(V.a,{}),Object(h.jsx)(f,{})]})})),ue=function(e){var t=e.favs,n=e.setPage,c=e.setMode;return Object(h.jsx)("div",{children:t.length>0?Object(h.jsx)(u.b,{to:"/game",onClick:function(){n("game"),c("favourites")},children:Object(h.jsxs)("div",{className:"profile__container selectable",children:[Object(h.jsx)("h1",{children:" Favourites "}),"You have ",t.length," favourited cards."]})}):Object(h.jsxs)("div",{className:"profile__container",children:[Object(h.jsx)("h1",{children:" Favourites "}),"You have no favourited cards. Click the * icon on any card to add them to favourites!"]})})},je=Object(r.b)((function(e){return{soloReady:e.solo.soloReady,loading:e.solo.loading,hasError:e.solo.hasError,journey:e.solo.journey}}))((function(e){var t=e.dispatch,n=e.soloReady,a=e.journey;Object(c.useEffect)((function(){t(K()),t(B())}),[t]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"journeystack",children:[Object(h.jsx)("h1",{children:" Journey "}),n?Object(h.jsxs)("p",{children:[" Your daily ",Object(h.jsx)(u.b,{className:"text__link",to:"/solo",children:"Solo Questions"})," are ready! "]}):null,Object(h.jsx)("div",{className:"profile__container",children:a&&0!=a.length?a.map((function(e,t){return Object(h.jsxs)(u.b,{to:"/profile/".concat(t),className:"profile__journey-entry--preview",children:[Object(h.jsxs)("span",{className:"profile__journey-entry--preview-date",children:[Object(h.jsx)("span",{className:"day",children:new Date(e.timestamp).getDate()}),y.timestampToMM(e.timestamp)]}),Object(h.jsxs)("span",{className:"preview-reflection",children:[Object(h.jsxs)("strong",{children:[" ",e.question," "]})," ",Object(h.jsx)("br",{}),Object(h.jsxs)("span",{children:[" ",e.reflection," "]})]}),e.picture?Object(h.jsx)("div",{className:"picc",children:Object(h.jsx)("img",{src:e.picture.pic.urls.small,className:"profile__journey-entry--preview-pic"})}):null]},t)})):Object(h.jsxs)("p",{children:[" Nothing in Journey yet! Play ",Object(h.jsx)(u.b,{className:"text__link",to:"/solo",children:"Solo Mode"})," to record your reflections. "]})})]})})})),be=function(e){var t=e.mode,n=e.setPage,a=e.setMode,s=Object(c.useState)([]),r=Object(l.a)(s,2),o=r[0],i=r[1];return Object(c.useEffect)((function(){localStorage.getItem("favs")&&i(y.readFavsFromStorage())}),[]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"game__profile--container",children:[Object(h.jsx)("h1",{children:" My Profile "}),Object(h.jsx)("div",{children:Object(h.jsx)(ue,{favs:o,setPage:n,setMode:a})}),Object(h.jsx)(je,{})]}),Object(h.jsx)(f,{mode:t})]})},de=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:" About "}),Object(h.jsxs)("p",{children:[" ",Object(h.jsx)("strong",{children:" SPARK "})," is an app for creating meaningful conversations. "]}),Object(h.jsxs)("p",{children:[" This app was created for Orbital 2021.",Object(h.jsx)("br",{}),"Images are from ",Object(h.jsx)("a",{className:"text__link",href:"https://unsplash.com",children:"Unsplash"}),", with icons from Font Awesome. ",Object(h.jsx)("br",{}),"Check out our ",Object(h.jsx)("a",{className:"text__link",href:"https://sparkblog.netlify.app",children:"development blog"})," and ",Object(h.jsx)("a",{className:"text__link",href:"https://github.com/qreoct/spark",children:"Github repositories"}),"."]}),Object(h.jsx)("h1",{children:" Privacy "}),Object(h.jsx)("p",{children:"We believe that your self-reflection is most meaningful when it is private. That\u2019s why we do not store any of your data, chat logs, and preferences on any server."}),Object(h.jsx)("p",{children:"Your responses in the Solo mode are only stored in your browser. Note that clearing your browser data leads to loss of game data!"}),Object(h.jsx)("div",{className:"menu__navigation--container",children:Object(h.jsx)(m,{})})]})},Oe=n(198),he=Object(Oe.io)({autoConnect:!1});he.onAny((function(e){}));var me=he,fe=n(211),pe=n(87),xe=n.n(pe),ve=function(e){var t=e.user,n=e.content,c=e.from;e.to;return c===t?Object(h.jsx)("div",{className:"msg msg--send",children:Object(h.jsx)("div",{className:"msg__bubble msg__bubble--send",children:Object(h.jsx)("p",{className:"msg__text",children:xe.a.emojify(n)})})}):"sparkbot"===c?Object(h.jsx)("div",{className:"msg",children:Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"msg__text msg--announce",children:xe.a.emojify(n)})})}):c!=t&&"sparkbot"!=c?Object(h.jsx)("div",{className:"msg msg--receive",children:Object(h.jsx)("div",{className:"msg__bubble msg__bubble--receive",children:Object(h.jsx)("p",{className:"msg__text",children:xe.a.emojify(n)})})}):null},ge=function(e){var t=e.user,n=e.messages;return Object(h.jsx)(fe.a,{className:"online__messages",children:n.map((function(e,n){return Object(h.jsx)(ve,{content:e.content,user:t,from:e.from,to:e.to},n)}))})},_e=function(e){var t=e.text,n=e.setText,c=e.sendMessage,a=e.prompt,s=void 0===a?"Type a message":a;return Object(h.jsxs)("form",{className:"input--form",onSubmit:c,children:[Object(h.jsx)("input",{autoFocus:!0,className:"textarea--border",type:"text",placeholder:s,value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}}),Object(h.jsx)("button",{type:"Submit",className:"input--button selectable",children:Object(h.jsx)(d.a,{icon:O.a,size:"3x",title:"Enter"})})]})},ye=function(e){var t=e.mode,n=e.setQuestions,a=Object(c.useState)(""),s=Object(l.a)(a,2),r=s[0],o=s[1],i=Object(c.useState)(""),u=Object(l.a)(i,2),b=u[0],d=u[1],O=Object(c.useState)([]),f=Object(l.a)(O,2),p=f[0],x=f[1],v=Object(j.g)().roomCode,g=Object(j.f)();window.onbeforeunload=function(){me.emit("leave")},Object(c.useEffect)((function(){return sessionStorage.getItem("userID")&&(sessionStorage.removeItem("userID"),g.push("/")),me.connect(),me.emit("join",v),me.isHost?D.getQuestionsFromCategory(t,5,4,1).then((function(e){n(e),me.emit("setQuestions",e)})):me.on("setQuestions",(function(e){n(e)})),me.on("session",(function(e){var t=e.userID;me.auth={userID:t},sessionStorage.setItem("userID",t),me.userID=t,d(t)})),me.on("message",(function(e){x((function(t){return t.concat(e)}))})),function(){sessionStorage.removeItem("userID"),me.auth=null,me.isHost=!1,me.emit("leave"),me.off(),g.push("/")}}),[me]);return Object(h.jsxs)("div",{className:"online__chat-container",children:[Object(h.jsx)(ge,{user:b,messages:p}),Object(h.jsx)(_e,{text:r,setText:o,sendMessage:function(e){e.preventDefault(),r&&(me.emit("private message",{content:r}),o(""))}}),Object(h.jsx)(m,{action:function(){window.confirm("You will not be able to come back, are you sure?")&&g.push("/")}})]})},Ne=function(e){var t=e.mode,n=Object(c.useState)(""),a=Object(l.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)([]),i=Object(l.a)(o,2),u=i[0],j=i[1],b=Object(c.useState)(0),d=Object(l.a)(b,2),O=d[0],m=d[1];Object(c.useEffect)((function(){0===u.length?r("loading..."):O>=u.length?r("You've reached the end of the questions!"):r(u[O].question)}),[u,O]),Object(c.useEffect)((function(){me.on("next",(function(){m((function(e){return e+1}))}))}),[]);var f=function(){me.emit("nextQuestion")};return Object(h.jsxs)("div",{className:"online__container",children:[Object(h.jsx)("div",{className:"online__question",children:O==u.length?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("span",{className:"card__picture--question",children:[" ",s," "]})}):Object(h.jsxs)(h.Fragment,{children:[u.length>0&&u[O].canPicture?Object(h.jsx)(F,{topic:u[O].topic,data:u[O],isActive:!0,mode:"online"}):Object(h.jsxs)("span",{className:"card__picture--question",children:[" ",s," "]}),Object(h.jsx)("button",{className:"selectable input--button center",onClick:f,children:" Next "})]})},s),Object(h.jsx)(ye,{mode:t,setQuestions:j})]})},Se=function(){return Object(h.jsx)("div",{className:"menu__sparklogo--container",children:Object(h.jsx)("img",{src:b,className:"site__sparklogo",alt:"SPARK logo"})})},ke=function(e){var t=e.setPage,n=e.setMode,a=Object(c.useState)("home"),s=Object(l.a)(a,2),r=s[0],o=s[1];switch(r){case"online":return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"menu__router--container",children:[Object(h.jsx)(u.b,{to:"/create",onClick:function(){t("create"),n("online-room")},children:Object(h.jsx)(p,{title:"Create",subtitle:"Create your unique room"},"Create")}),Object(h.jsx)(u.b,{to:"/join",onClick:function(){t("join"),n("online-room")},children:Object(h.jsx)(p,{title:"Join",subtitle:"Join an existing room"},"Join")}),Object(h.jsx)(u.b,{to:"/random",onClick:function(){t("random"),n("online-stranger")},children:Object(h.jsx)(p,{title:"Random",subtitle:"Join a random room"},"Random")})]}),Object(h.jsx)("div",{className:"menu__navigation--container",children:Object(h.jsx)(m,{action:function(){return o("player")}})})]});case"mode":return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"menu__router--container",children:[Object(h.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("icebreakers")},children:[" ",Object(h.jsx)(p,{title:"Icebreakers",subtitle:"Get to know anyone!"},"Icebreakers")," "]}),Object(h.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("deep")},children:[" ",Object(h.jsx)(p,{title:"Deep Questions",subtitle:"Go deep!"},"Deep")," "]}),Object(h.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("this-or-that")},children:[" ",Object(h.jsx)(p,{title:"This or That",subtitle:"Which will you choose?"},"ThisOrThat")," "]})]}),Object(h.jsx)("div",{className:"menu__navigation--container",children:Object(h.jsx)(m,{action:function(){return o("player")}})})]});case"player":return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"menu__router--container",children:[Object(h.jsxs)(u.b,{to:"/solo",onClick:function(){t("solo"),n("solo")},children:[" ",Object(h.jsx)(p,{title:"Solo",subtitle:"Self journey"},"Solo")," "]}),Object(h.jsxs)(u.b,{to:"/",onClick:function(){return o("mode")},children:[" ",Object(h.jsx)(p,{title:"Group",subtitle:"Group fun!"},"Group")," "]}),Object(h.jsxs)(u.b,{to:"/",onClick:function(){return o("online")},children:[" ",Object(h.jsx)(p,{title:"Online",subtitle:"Play with friends or strangers!"},"Online")," "]})]}),Object(h.jsx)("div",{className:"menu__navigation--container",children:Object(h.jsx)(m,{action:function(){return o("home")}})})]});default:return Object(h.jsxs)("div",{className:"menu__router--container",children:[Object(h.jsxs)(u.b,{to:"/",onClick:function(){return o("player")},children:[" ",Object(h.jsx)(p,{title:"Play",subtitle:"Spark meaningful conversations"},"Play")," "]}),Object(h.jsxs)(u.b,{to:"/profile",onClick:function(){t("profile"),n("profile")},children:[" ",Object(h.jsx)(p,{title:"Profile",subtitle:"Your profile"},"Profile")," "]}),Object(h.jsxs)(u.b,{to:"/about",onClick:function(){return t("about")},children:[" ",Object(h.jsx)(p,{title:"About"},"About")," "]})]})}},we=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(j.f)();Object(c.useEffect)((function(){me.connect()}),[]);return Object(h.jsxs)("div",{className:"online__container",children:[Object(h.jsx)(Se,{}),Object(h.jsxs)("div",{className:"join__container",children:[Object(h.jsx)("h1",{children:"Join Room"}),Object(h.jsx)(_e,{text:n,setText:a,sendMessage:function(e){e.preventDefault(),me.emit("joining",n,(function(e){var t=e.error;t?alert(t):s.push("/online/".concat(n))}))},prompt:"Enter room code"})]}),Object(h.jsx)(m,{})]})},Ee="https://sparkorbital.herokuapp.com",Ce=function(){var e=Object(c.useState)("loading..."),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(j.f)();Object(c.useEffect)((function(){me.connect(),me.emit("create"),me.once("create",(function(e){a(e)})),me.once("joining",(function(e){me.isHost=!0,s.push("/online/".concat(e))}))}),[]);return Object(h.jsxs)("div",{className:"online__container",children:[Object(h.jsx)(Se,{}),Object(h.jsx)("h1",{children:"Create Room"}),"Your room code is",Object(h.jsx)("h1",{children:n}),"Copy this URL to share with your friends:",Object(h.jsxs)("span",{className:"selectable selectable-text",onClick:function(){navigator.clipboard.writeText("".concat(Ee,"/online/").concat(n)).then((function(){Object(V.b)("Copied URL!",{duration:1500,position:"top"})}))},children:[" ",Object(h.jsx)("em",{children:"".concat(Ee,"/online/").concat(n)})," "]}),Object(h.jsx)("h5",{children:"The room will start once one other player joins"}),Object(h.jsx)(m,{}),Object(h.jsx)(V.a,{})]})},Te=function(){var e=Object(j.f)();window.onbeforeunload=function(){me.emit("leaveWaiting")},Object(c.useEffect)((function(){return me.connect(),me.emit("waiting",null,(function(t){t&&(me.isHost=!0,e.push("/online/".concat(t)))})),me.once("joining",(function(t){e.push("/online/".concat(t))})),function(){me.emit("leaveWaiting")}}),[]);return Object(h.jsxs)("div",{className:"online__container",children:[Object(h.jsx)(Se,{}),Object(h.jsx)("h1",{children:"Waiting for players..."}),Object(h.jsx)("h5",{children:"The room will start once one other player joins"}),Object(h.jsx)(m,{action:function(){me.emit("leaveWaiting"),e.goBack()}})]})},qe=function(e){var t=e.data;return t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:" My Journey "}),Object(h.jsxs)("div",{className:"profile__container entry",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{className:"profile__journey-entry--title",children:[" ",t.question," "]}),Object(h.jsxs)("p",{className:"profile__journey-entry--date",children:[" ",y.timestampToString(t.timestamp)," "]}),t.picture?Object(h.jsx)("div",{className:"profile__journey-entry--pic-container",children:Object(h.jsx)("img",{src:t.picture.pic.urls.small,className:"profile__journey-entry--pic"})}):null]}),Object(h.jsxs)("p",{className:"profile__journey-entry--reflection",children:[t.reflection," "]})]})]}):null},Ie=Object(r.b)((function(e){return{journey:e.solo.journey}}))((function(e){var t=e.dispatch,n=e.journey,a=Object(j.g)().id;return Object(c.useEffect)((function(){t(K())}),[t]),Object(h.jsxs)("div",{children:[Object(h.jsx)(qe,{data:n[a]}),Object(h.jsx)("div",{className:"menu__navigation--container",children:Object(h.jsx)(m,{})})]})})),Fe=function(){var e=Object(c.useState)("home"),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)("none"),s=Object(l.a)(a,2),r=s[0],o=s[1],i=function(e){n(e)};return Object(h.jsx)(u.a,{children:Object(h.jsx)("div",{className:"site__container",children:Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/online/:roomCode",children:Object(h.jsx)("div",{className:"game__container",children:Object(h.jsx)(Ne,{mode:r})})}),Object(h.jsx)(j.a,{path:"/random",children:Object(h.jsx)("div",{className:"game__container",children:Object(h.jsx)(Te,{})})}),Object(h.jsx)(j.a,{path:"/join",children:Object(h.jsx)("div",{className:"game__container",children:Object(h.jsx)(we,{})})}),Object(h.jsx)(j.a,{path:"/create",children:Object(h.jsx)("div",{className:"game__container",children:Object(h.jsx)(Ce,{})})}),Object(h.jsx)(j.a,{path:"/game",children:Object(h.jsx)("div",{className:"game__container",children:Object(h.jsx)(le,{mode:r})})}),Object(h.jsx)(j.a,{path:"/solo",children:Object(h.jsx)(X,{})}),Object(h.jsx)(j.a,{path:"/about",children:Object(h.jsx)("div",{className:"menu__content--container",children:Object(h.jsxs)("div",{className:"menu__content--data",children:[Object(h.jsx)(Se,{}),Object(h.jsx)(de,{})]})})}),Object(h.jsx)(j.a,{path:"/profile/:id",children:Object(h.jsx)("div",{className:"menu__content--container",children:Object(h.jsx)("div",{className:"menu__content--data",children:Object(h.jsx)(Ie,{})})})}),Object(h.jsx)(j.a,{path:"/profile",children:Object(h.jsx)("div",{className:"menu__content--container",children:Object(h.jsx)("div",{className:"menu__content--data",children:Object(h.jsx)(be,{mode:r,setPage:i,setMode:o})})})}),Object(h.jsx)(j.a,{path:"/",children:Object(h.jsx)("div",{className:"menu__content--container",children:Object(h.jsxs)("div",{className:"menu__content--data",children:[Object(h.jsx)(Se,{}),Object(h.jsx)(ke,{setPage:i,setMode:o})]})})})]})})})},Re="GET_PICTURE",Me="GET_PICTURE_SUCCESS",De="GET_PICTURE_FAILURE";var Ae={pictures:{},loading:!1,hasErrors:!1};var Je={questions:[],loading:!1,hasErrors:!1};var Pe=Object(s.combineReducers)({pictures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return Object(x.a)(Object(x.a)({},e),{},{loading:!0});case Me:return{pictures:t.payload,loading:!1,hasErrors:!1};case De:return Object(x.a)(Object(x.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(x.a)(Object(x.a)({},e),{},{loading:!0});case te:return{questions:t.payload,loading:!1,hasErrors:!1};case ne:return Object(x.a)(Object(x.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},solo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(x.a)(Object(x.a)({},e),{},{loading:!0});case J:return Object(x.a)(Object(x.a)({},e),{},{soloReady:!0,loading:!1});case P:return Object(x.a)(Object(x.a)({},e),{},{soloReady:!1,loading:!1});case Q:return Object(x.a)(Object(x.a)({},e),{},{loading:!1,questions:t.payload});case U:return Object(x.a)(Object(x.a)({},e),{},{loading:!1,hasErrors:!0});case Y:return Object(x.a)(Object(x.a)({},e),{},{journey:t.payload});case H:return Object(x.a)(Object(x.a)({},e),{},{hasErrors:!0});default:return e}}}),Qe=Object(s.createStore)(Pe,Object(i.composeWithDevTools)(Object(s.applyMiddleware)(o.a)));Object(a.render)(Object(h.jsx)(r.a,{store:Qe,children:Object(h.jsx)(Fe,{})}),document.getElementById("root"))}},[[422,1,2]]]);
//# sourceMappingURL=main.8c266ac2.chunk.js.map