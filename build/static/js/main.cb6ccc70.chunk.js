(this.webpackJsonpspark=this.webpackJsonpspark||[]).push([[0],{36:function(e,t,n){},422:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(85),s=n(55),o=n(25),r=n(196),i=n(197),l=(n(36),n(3)),u=n(6),j=n(10),d=n.p+"static/media/Logo_conversations.9105b769.svg",b=n(47),h=n(45),m=n(0),O=function(e){var t=e.action,n=e.text,c=Object(j.f)(),a=void 0===t?function(){c.goBack()}:t,s=void 0===n?"back":n;return Object(m.jsxs)("div",{className:"menu__linkbutton--back",onClick:a,children:[Object(m.jsx)(b.a,{icon:h.b})," ",s]})},f=n(15),p=function(){return JSON.parse(localStorage.getItem("favs"))||[]},x={shuffle:function(e){var t,n,c;for(c=e.length-1;c>0;c--)t=Math.floor(Math.random()*(c+1)),n=e[c],e[c]=e[t],e[t]=n;return e},timestampToMM:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][new Date(e).getMonth()-1]},timestampToString:function(e){function t(e){return e<10&&(e="0"+e),e}var n=new Date(e),c=n.getDate(),a=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()-1],s=n.getFullYear(),o="".concat(t(n.getHours()),":").concat(t(n.getMinutes()));return"".concat(c," ").concat(a," ").concat(s,", ").concat(o)},writeToFavs:function(e){var t=p();t.push(e),localStorage.setItem("favs",JSON.stringify(t))},toggleFromFavs:function(e){var t=p(),n=t.findIndex((function(t){return t.id===e.id}));-1===n?t.push(e):t.splice(n,1),localStorage.setItem("favs",JSON.stringify(t))},isInFavs:function(e){return-1!=p().findIndex((function(t){return t.id===e.id}))},readFavsFromStorage:p,checkSoloReady:function(){if(JSON.parse(localStorage.getItem("solo"))){var e=new Date(JSON.parse(localStorage.getItem("solo"))),t=new Date(Date.now());return console.log("stamp",e),console.log("now",t),e.getDate()!==t.getDate()||e.getMonth()!==t.getMonth()||e.getUTCFullYear()!==t.getUTCFullYear()}return!0},setSoloTimestamp:function(){var e=Date.now();localStorage.setItem("solo",JSON.stringify(e))},writeSoloReflection:function(e){var t=Date.now(),n={question:e.question,reflection:e.reflection,picture:e.picture||!1,timestamp:t},c=JSON.parse(localStorage.getItem("reflection"))||[];localStorage.setItem("reflection",JSON.stringify([].concat(Object(f.a)(c),[n])))},hasOnbording:function(e){return console.log("hasOnboarding",JSON.parse(localStorage.getItem("onboarding-".concat(e)))),!JSON.parse(localStorage.getItem("onboarding-".concat(e)))&&(localStorage.setItem("onboarding-".concat(e),"true"),!0)}},g=function(e){var t,n,c=e.mode,a=e.setInvisible,s=function(e){e.preventDefault(),a()};switch(console.log("mode is ",c),c){case"favourites":n="Favourites",t="Your Favourited cards are all here! Swipe the cards to reveal more Questions!";break;case"solo":n="Solo",t="Solo mode is perfect for reflection and self-discovery! \n\nEvery day, you'll receive 3 thought provoking questions. Write down answers that will be saved in your personal Journey, and look back on them in the future!";break;case"icebreakers":n="Icebreakers",t="Welcome to Icebreakers mode! Swipe the cards to reveal more Questions! \n\nSpark any conversation with our wide variety of Icebreakers! You're sure to get to know somebody with these questions.";break;case"deep":n="Deep Dive",t="Welcome to Deep Dive mode! Swipe the cards to reveal more Questions! \n\nDeep Dive contains questions that challenge assumptions and go deep into what\u2019s normally left unsaid. Find out what you and your friends are truly like, and bond together in the process!";break;case"story":n="Story",t="Welcome to Story mode! Swipe the cards to reveal more Questions! \n\nStory mode is about getting to know someone on a different level. Answer 10 questions in total, which get progressively more personal, and learn about one another in the process. \n\nFor each question, choose one player to be the Question Asker, while the other player answers. Swap over at every question.";break;case"this-or-that":n="This or That",t="Welcome to This or That mode! Swipe the cards to reveal more Questions! \n\nThis or That is a lighthearted game, where you find out about each others' preferences. Which will you pick?"}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"modal",onClick:s}),Object(m.jsxs)("div",{className:"modal__content",children:[Object(m.jsx)("h1",{children:n}),Object(m.jsx)("span",{children:t}),Object(m.jsx)("div",{className:"modal__close",children:Object(m.jsx)(O,{action:s,text:"close"})})]})]})},v=function(e){var t=e.mode,n=Object(c.useState)(!1),a=Object(l.a)(n,2),s=a[0],o=a[1];Object(c.useEffect)((function(){console.log("helpmodal useEffect"),x.hasOnbording(t)&&o(!0)}),[]);var r=function(e){e.preventDefault(),o(!0)};return Object(m.jsxs)(m.Fragment,{children:[s?Object(m.jsx)(g,{mode:t,setInvisible:function(){o(!1)}}):null,Object(m.jsx)("div",{className:"game__navbar--back",children:Object(m.jsx)("div",{className:"menu__linkbutton--back",onMouseUp:r,onTouchEnd:r,children:" help "})})]})},_=function(e){var t=e.mode,n="profile"===t?"profile":"game";return console.log("navbar mode",t),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"navbar ".concat(n,"__navbar"),children:[Object(m.jsxs)("div",{className:"game__navbar--back",children:[" ",Object(m.jsx)(O,{})," "]}),Object(m.jsx)("img",{src:d,className:"site__sparklogo game__navbar--logo",alt:"SPARK logo"}),"profile"!=t?Object(m.jsx)(v,{mode:t}):null]})})},y=function(e){var t=e.title,n=e.subtitle,c=e.action,a=c;return Object(m.jsxs)("div",{className:"menu__linkbutton selectable",onClick:a,children:[Object(m.jsxs)("span",{className:"menu__linkbutton--title",children:[" ",t," "]})," ",Object(m.jsx)("br",{}),Object(m.jsxs)("span",{className:"menu__linkbutton--subtitle",children:[" ",n," "]})]})},S=n(9),N=n(121),k=function(e){var t=e.data,n=e.isFavoritible,a=void 0===n||n,s=e.color,o=e.displayToast,r=e.mode,i=Object(c.useState)(!1),u=Object(l.a)(i,2),j=u[0],d=u[1],O=Object(c.useState)(N.a),f=Object(l.a)(O,2),p=f[0],g=f[1],v=Object(c.useState)(null),_=Object(l.a)(v,2),y=_[0],S=_[1],k=Object(c.useState)("Loading question..."),w=Object(l.a)(k,2),E=w[0],q=w[1];Object(c.useEffect)((function(){if(null==y&&S(s),"this-or-that"===r){var e=[t.this,t.that];x.shuffle(e),q("".concat(e[0]," or ").concat(e[1],"?"))}else q(t.question)}),[]);var C=function(e){e.preventDefault(),x.toggleFromFavs(t),o(j?"Removed from favourites":"Added to favourites"),d(!j)},T=function(){navigator.share?navigator.share({title:"SPARK Meaningful Conversations",text:E}).catch((function(e){return console.log("Error sharing",e)})):navigator.clipboard.writeText(E).then((function(){o("Copied question to clipboard! Share it with your friends!")}))};Object(c.useEffect)((function(){d(x.isInFavs(t))}),[]),Object(c.useEffect)((function(){g(j?h.d:N.a)}),[j]);return Object(m.jsx)("div",{className:"game__question-card--content-container",children:0===Object.keys(t).length?null:Object(m.jsxs)("div",{className:"game__question-card --".concat(y),children:[Object(m.jsxs)("p",{className:"game__question-card--title disable--select",children:[" ",E," "]}),a?Object(m.jsxs)("div",{className:"game__question-card--icons-container disable--select",children:[Object(m.jsx)(b.a,{icon:p,className:"game__question-card--icon",size:"3x",onClick:C,onTouchEnd:C,title:j?"Remove from favourites":"Add to favourites"}),Object(m.jsx)(b.a,{icon:h.c,className:"game__question-card--icon",size:"3x",onClick:T,onTouchEnd:T,title:"Share"})]}):Object(m.jsx)("p",{children:" "})]})})},w=n(5),E=n.n(w),q=n(12),C=n(24),T=n.n(C),F="/api/pictures",I={getPictureFromUnsplash:function(){var e=Object(q.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(F,"/random"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pictureByTopic:function(){var e=Object(q.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(F,"/topic/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pictureByTopicCount:function(){var e=Object(q.a)(E.a.mark((function e(t,n){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(F,"/topic/").concat(t,"/").concat(n));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pictureByQueryCount:function(){var e=Object(q.a)(E.a.mark((function e(t,n){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(F,"/query/").concat(t,"/").concat(n));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},D=function(e){var t=e.pictures,n=e.isSelectable,a=void 0!==n&&n,s=e.handleSelect,o=Object(c.useState)(null),r=Object(l.a)(o,2),i=r[0],u=r[1],j=function(){null==i?alert("You did not select!"):s(i)},d=function(e,t){e.preventDefault(),null===i||i.id!=t.id?u(t):u(null)};return 0===t.length?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"card__picture--gallery",children:t.map((function(e){return Object(m.jsx)("div",{className:"card__picture--container ".concat(a?"selectable":""," \n                ").concat(i&&i.id==e.id?"selected":""),onTouchEnd:function(t){return d(t,e)},onMouseUp:function(t){return d(t,e)},children:Object(m.jsx)("img",{src:e.urls.small,alt:e.alt_description,className:"card__picture--thumb ".concat(1===t.length?"card__picture--solo":"")})},e.id)}))}),Object(m.jsx)("div",{children:a?Object(m.jsx)("button",{onClick:j,className:"input--button --amethyst selectable",children:" Select "}):null})]})},M=function(e){var t=e.topic,n=e.data,a=e.isActive,s=e.mode,o=e.isSelectable,r=void 0!==o&&o,i=e.handleSelect,u=Object(c.useState)([]),j=Object(l.a)(u,2),d=j[0],b=j[1],h=Object(c.useState)("Loading question..."),O=Object(l.a)(h,2),p=O[0],g=O[1];Object(c.useEffect)(Object(q.a)(E.a.mark((function e(){var c,a,o,r,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.this){e.next=13;break}return c=[n.this,n.that],x.shuffle(c),"this-or-that"===s&&g("".concat(c[0]," or ").concat(c[1],"?")),e.next=6,I.pictureByQueryCount(n.this,1);case 6:return a=e.sent,e.next=9,I.pictureByQueryCount(n.that,1);case 9:o=e.sent,b([].concat(Object(f.a)(a),Object(f.a)(o))),e.next=28;break;case 13:if(!n.pic){e.next=17;break}b([n.pic]),e.next=28;break;case 17:if("online"!==s){e.next=24;break}return e.next=20,I.pictureByTopicCount(t,2);case 20:r=e.sent,b(Object(f.a)(r)),e.next=28;break;case 24:return e.next=26,I.pictureByTopicCount(t,5);case 26:i=e.sent,b(Object(f.a)(i));case 28:g(n.question);case 29:case"end":return e.stop()}}),e)}))),[]);return Object(m.jsxs)("div",{className:"card__picture ".concat(a?"active":"inactive"," ").concat(r?"":"disable--select"),children:[Object(m.jsx)("div",{style:{margin:"20px"},children:Object(m.jsxs)("p",{className:"card__picture--question",children:[" ",p," "]})}),0===Object.keys(d).length?null:Object(m.jsx)(D,{pictures:d,isSelectable:r,handleSelect:i})]})},R=function(e){var t=e.data,n=e.displayToast,a=e.submitHandler,s=["jade","topaz","amethyst","amber"],o=s[Math.floor(Math.random()*s.length)],r=Object(c.useState)(""),i=Object(l.a)(r,2),u=i[0],j=i[1],d=Object(c.useState)(null),b=Object(l.a)(d,2),h=b[0],O=b[1],f=Object(c.useState)(null),p=Object(l.a)(f,2),x=p[0],g=p[1],v=function(e){j(e.target.value)},_=function(e){e.preventDefault(),""==u?n("Please write out a reflection!"):(a({reflection:u,picture:h||null}),j(""),n("Response Submitted!"))},y=function(){return Object(m.jsxs)("div",{className:"solo__input--form",children:[x?Object(m.jsx)("div",{className:"solo__input--pic",children:Object(m.jsx)(M,{data:h,mode:"solo",isActive:!0},"p")}):null,Object(m.jsx)("h1",{className:"solo__input--title",children:"Reflection"}),Object(m.jsx)("textarea",{value:u,onChange:v,spellCheck:"false",className:"textarea--solid"}),Object(m.jsx)("button",{onClick:_,onTouchEnd:_,className:"input--button selectable end --".concat(o),children:" Save "})]})};return Object(m.jsx)("div",{className:"solo__input",children:t.canPicture?Object(m.jsx)(m.Fragment,{children:x?y():Object(m.jsx)(M,{topic:t.topic,data:t,isActive:!0,mode:"solo",isSelectable:!0,handleSelect:function(e){g(e),t=Object(S.a)(Object(S.a)({},t),{},{pic:Object(S.a)({},e)}),O(t)}})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{data:t,isFavoritible:!0,displayToast:n,color:o,mode:"solo"}),y()]})})},J="/api/questions",A={getAllQuestions:function(){var e=Object(q.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(J);case 2:return t=e.sent,e.abrupt("return",x.shuffle(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAllQuestionsFromCategory:function(){var e=Object(q.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/questions/"+t);case 2:return n=e.sent,e.abrupt("return",x.shuffle(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getQuestionsFromCategory:function(){var e=Object(q.a)(E.a.mark((function e(t){var n,c,a,s,o,r,i,l,u,j,d,b,h,m,O=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(J,"/").concat(t,"/1"));case 2:return n=e.sent,e.next=5,T.a.get("".concat(J,"/").concat(t,"/2"));case 5:return c=e.sent,e.next=8,T.a.get("".concat(J,"/").concat(t,"/3"));case 8:for(a=e.sent,s=[],o=O.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=O[i];return l=[].concat(r),u=l[0],j=l[1],d=l[2],u&&(b=x.shuffle(n.data).slice(0,u),s=[].concat(Object(f.a)(s),Object(f.a)(b))),j&&(h=x.shuffle(c.data).slice(0,j),s=[].concat(Object(f.a)(s),Object(f.a)(h))),d&&(m=x.shuffle(a.data).slice(0,d),s=[].concat(Object(f.a)(s),Object(f.a)(m))),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSoloQuestions:function(){var e=Object(q.a)(E.a.mark((function e(){var t,n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/questions/solo/1");case 2:return t=e.sent,n=[2,2,2,2,3][Math.floor(5*Math.random())],e.next=6,T.a.get("/api/questions/solo/"+n);case 6:return c=e.sent,t=x.shuffle(t.data).slice(0,2),c=c.data[Math.floor(Math.random()*c.data.length)],e.abrupt("return",[].concat(Object(f.a)(t),[c]));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q="CHECK_SOLO_READY",P="IS_READY",Y="IS_UNREADY",U="FETCH_SOLO_QUESTIONS_SUCCESS",W="FETCH_SOLO_QUESTIONS_FAILURE",H="FETCH_JOURNEY",L="THROW_ERROR",B={soloReady:!0,loading:!1,hasErrors:!1,journey:[],questions:[]};var G=function(){return{type:Q}},K=function(e){return{type:U,payload:e}},z=function(){return{type:L}};function V(){return function(){var e=Object(q.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G());try{n=x.checkSoloReady(),t(n?{type:P}:{type:Y})}catch(c){t(z())}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function X(){return function(e){e(G());try{var t=JSON.parse(localStorage.getItem("reflection"))||[];e({type:H,payload:t})}catch(n){e(z())}}}var Z=Object(o.b)((function(e){return{loading:e.solo.loading,questions:e.solo.questions,hasErrors:e.solo.hasErrors}}))((function(e){var t=e.dispatch,n=e.loading,a=e.questions,s=e.hasErrors,o=e.displayToast,r=Object(c.useState)(0),i=Object(l.a)(r,2),u=i[0],j=i[1];Object(c.useEffect)((function(){t(function(){var e=Object(q.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(G()),e.prev=1,localStorage.getItem("solo_questions")){e.next=9;break}return e.next=5,A.getSoloQuestions();case 5:n=e.sent,localStorage.setItem("solo_questions",JSON.stringify(n)),e.next=10;break;case 9:n=JSON.parse(localStorage.getItem("solo_questions"));case 10:t(K(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:W});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()),j(Number(localStorage.getItem("solo_index")))}),[t]);var d=function(e){x.writeSoloReflection({question:a[u].question,reflection:e.reflection,picture:e.picture||null}),j(u+1),localStorage.setItem("solo_index",(u+1).toString()),u+1==a.length&&(x.setSoloTimestamp(),localStorage.setItem("solo_index",(0).toString()),t(function(){var e=Object(q.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getSoloQuestions();case 3:n=e.sent,localStorage.setItem("solo_questions",JSON.stringify(n)),t(K(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(z());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))};return n?Object(m.jsx)("p",{children:" loading "}):s?Object(m.jsx)("p",{children:" error :( "}):a?u==a.length?Object(m.jsx)("p",{children:" That's all the questions for today! Your responses are saved in your Journey. "}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(R,{data:a[u],displayToast:o,submitHandler:d},u)}):Object(m.jsx)("p",{children:" fatal error "})})),$=n(40),ee=Object(o.b)((function(e){return{soloReady:e.solo.soloReady,loading:e.solo.loading,hasError:e.solo.hasError}}))((function(e){var t=e.dispatch,n=e.soloReady,a=(e.loading,e.hasError,e.setMode),s=Object(c.useState)("menu"),o=Object(l.a)(s,2),r=o[0],i=o[1];Object(c.useEffect)((function(){t(V())}),[t]);var j=function(){i("game")},d=function(e){Object($.b)(e,{position:"top",duration:1500})};return Object(m.jsxs)("div",{className:"solo",children:["menu"===r?Object(m.jsxs)("div",{className:"solo__welcome",children:[Object(m.jsx)("p",{className:"card__picture--question",children:" Welcome to Solo mode! "}),Object(m.jsxs)("p",{children:[" Every day, you'll receive 3 thought provoking questions. Write down answers that will be saved to your personal ",Object(m.jsx)(u.b,{className:"text__link",to:"/profile",onClick:a("profile"),children:" Journey "})," "]}),Object(m.jsxs)("p",{children:[" ",Object(m.jsx)("strong",{children:"NOTE:"})," We do not store any of your data on servers. It is all stored in your local browser storage. "]}),n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:" Hit start to begin! "}),Object(m.jsx)(y,{title:"Start",action:j})]}):Object(m.jsx)("p",{children:" You have completed all 3 questions today! Come back tomorrow. "})]}):"game"===r?Object(m.jsx)(Z,{displayToast:d}):void 0,Object(m.jsx)($.a,{}),Object(m.jsx)(_,{mode:"solo"})]})})),te=n(125),ne=function(e){var t=e.completed,n={height:"100%",width:"".concat(t,"%"),textAlign:"right",transition:"width 0.5s ease-in-out"},c={padding:5,color:"".concat(0===t?"white":"black"),fontWeight:"bold"};return Object(m.jsx)("div",{children:Object(m.jsx)("div",{style:n,className:"--spark",children:Object(m.jsx)("span",{style:c,children:"".concat(t,"%")})})})},ce=function(e){var t=e.questions,n=e.mode,a=e.isFavoritible,s=e.displayToast,o=Object(c.useState)([]),r=Object(l.a)(o,2),i=r[0],u=r[1],j=Object(c.useState)(0),d=Object(l.a)(j,2),b=d[0],h=d[1],O=["topaz","amber","amethyst","jade"],f=O[Math.floor(Math.random()*O.length)];Object(c.useEffect)((function(){u(t.slice(0,5)),p()}),[]);var p=function(){h(b+1);var e=b+5>=t.length?t.length:b+5;u(t.slice(b,e))},x={background:"transparent",border:"none",overflow:"visible",height:"auto",maxWidth:"800px"};return Object(m.jsxs)("div",{children:["story"===n?Object(m.jsx)(ne,{completed:10*(b-1)}):null,Object(m.jsx)(te.b,{className:"game__question-card--container",children:i.map((function(e,t){return Object(m.jsx)(te.a,{onSwipe:p,style:x,children:e.canPicture?Object(m.jsx)(M,{topic:e.topic,data:e,isActive:0===t,mode:n}):Object(m.jsx)(k,{data:e,isFavoritible:a,displayToast:s,color:f,mode:n})},e.id)}))})]})},ae="GET_QUESTION",se="GET_QUESTION_SUCCESS",oe="GET_QUESTION_FAILURE",re={questions:[],loading:!1,hasErrors:!1};var ie=function(){return{type:ae}},le=function(e){return{type:se,payload:e}},ue=function(){return{type:oe}};var je=n.p+"static/media/mode_deep.04293f89.svg",de=n.p+"static/media/mode_icebreakers.a35ce8ea.svg",be=n.p+"static/media/mode_thisorthat.e728f6b4.svg",he=Object(o.b)((function(e){return{loading:e.questions.loading,questions:e.questions.questions,hasErrors:e.questions.hasErrors}}))((function(e){var t=e.dispatch,n=e.loading,a=e.questions,s=e.hasErrors,o=e.mode;Object(c.useEffect)((function(){var e;t((e=o,function(){var t=Object(q.a)(E.a.mark((function t(n){var c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(ie()),t.prev=1,"favourites"!==e){t.next=8;break}return t.next=5,x.readFavsFromStorage();case 5:c=t.sent,t.next=17;break;case 8:if("story"!==e){t.next=14;break}return t.next=11,A.getQuestionsFromCategory("story",7,2,1);case 11:c=t.sent,t.next=17;break;case 14:return t.next=16,A.getAllQuestionsFromCategory(e);case 16:c=t.sent;case 17:n(le(c)),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),n(ue());case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]);var r=function(e){Object($.b)(e,{position:"top",duration:1500})};return Object(m.jsxs)("div",{children:[n?Object(m.jsxs)("div",{className:"flex-center",children:[" ",Object(m.jsx)("p",{children:" Loading game... "})," "]}):s?Object(m.jsxs)("div",{className:"flex-center",children:[" ",Object(m.jsx)("p",{children:" An error occured. Please try again. "})," "]}):Object(m.jsx)(ce,{questions:a,mode:o,isFavoritible:!0,displayToast:r}),function(){switch(o){case"deep":return Object(m.jsx)("img",{src:je,className:"modeicon"});case"icebreakers":return Object(m.jsx)("img",{src:de,className:"modeicon"});case"this-or-that":return Object(m.jsx)("img",{src:be,className:"modeicon"});default:return null}}(),Object(m.jsx)($.a,{}),Object(m.jsx)(_,{mode:o})]})})),me=function(e){var t=e.favs,n=e.setPage,c=e.setMode;return Object(m.jsx)("div",{children:t.length>0?Object(m.jsx)(u.b,{to:"/game",onClick:function(){n("game"),c("favourites")},children:Object(m.jsxs)("div",{className:"profile__container selectable",children:[Object(m.jsx)("h1",{children:" Favourites "}),"You have ",t.length," favourited cards. ",Object(m.jsx)("span",{className:"selectable-text",children:" View Favourites > "})]})}):Object(m.jsxs)("div",{className:"profile__container",children:[Object(m.jsx)("h1",{children:" Favourites "}),"You have no favourited cards. Click the * icon on any card to add them to favourites!"]})})},Oe=Object(o.b)((function(e){return{soloReady:e.solo.soloReady,loading:e.solo.loading,hasError:e.solo.hasError,journey:e.solo.journey}}))((function(e){var t=e.dispatch,n=e.soloReady,a=e.journey;Object(c.useEffect)((function(){t(X()),t(V())}),[t]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"journeystack",children:[Object(m.jsx)("h1",{children:" Journey "}),n?Object(m.jsxs)("p",{children:[" Your daily ",Object(m.jsx)(u.b,{className:"text__link",to:"/solo",children:"Solo Questions"})," are ready! "]}):null,Object(m.jsx)("div",{className:"profile__container",children:a&&0!=a.length?a.map((function(e,t){return Object(m.jsxs)(u.b,{to:"/profile/".concat(t),className:"profile__journey-entry--preview",children:[Object(m.jsxs)("span",{className:"profile__journey-entry--preview-date",children:[Object(m.jsx)("span",{className:"day",children:new Date(e.timestamp).getDate()}),x.timestampToMM(e.timestamp)]}),Object(m.jsxs)("span",{className:"preview-reflection",children:[Object(m.jsxs)("strong",{children:[" ",e.question," "]})," ",Object(m.jsx)("br",{}),Object(m.jsxs)("span",{children:[" ",e.reflection," "]})]}),e.picture?Object(m.jsx)("div",{className:"picc",children:Object(m.jsx)("img",{src:e.picture.pic.urls.small,className:"profile__journey-entry--preview-pic"})}):null]},t)})):Object(m.jsxs)("p",{children:[" Nothing in Journey yet! Play ",Object(m.jsx)(u.b,{className:"text__link",to:"/solo",children:"Solo Mode"})," to record your reflections. "]})})]})})})),fe=function(e){var t=e.mode,n=e.setPage,a=e.setMode,s=Object(c.useState)([]),o=Object(l.a)(s,2),r=o[0],i=o[1];return Object(c.useEffect)((function(){localStorage.getItem("favs")&&i(x.readFavsFromStorage()),a("profile")}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"game__profile--container",children:[Object(m.jsx)("h1",{children:" My Profile "}),Object(m.jsx)("div",{children:Object(m.jsx)(me,{favs:r,setPage:n,setMode:a})}),Object(m.jsx)(Oe,{})]}),Object(m.jsx)(_,{mode:t})]})},pe=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:" About "}),Object(m.jsxs)("p",{children:[" ",Object(m.jsx)("strong",{children:" SPARK "})," is an app for creating meaningful conversations. "]}),Object(m.jsxs)("p",{children:[" This app was created for Orbital 2021.",Object(m.jsx)("br",{}),"Images are from ",Object(m.jsx)("a",{className:"text__link",href:"https://unsplash.com",children:"Unsplash"}),", with icons from Font Awesome. ",Object(m.jsx)("br",{}),"Check out our ",Object(m.jsx)("a",{className:"text__link",href:"https://sparkblog.netlify.app",children:"development blog"})," and ",Object(m.jsx)("a",{className:"text__link",href:"https://github.com/qreoct/spark",children:"Github repositories"}),"."]}),Object(m.jsx)("h1",{children:" Privacy "}),Object(m.jsx)("p",{children:"We believe that your self-reflection is most meaningful when it is private. That\u2019s why we do not store any of your data, chat logs, and preferences on any server."}),Object(m.jsx)("p",{children:"Your responses in the Solo mode are only stored in your browser. Note that clearing your browser data leads to loss of game data!"}),Object(m.jsx)("div",{className:"menu__navigation--container",children:Object(m.jsx)(O,{})})]})},xe=n(198),ge=Object(xe.io)({autoConnect:!1});ge.onAny((function(e){}));var ve=ge,_e=n(211),ye=n(87),Se=n.n(ye),Ne=function(e){var t=e.user,n=e.content,c=e.from;e.to;return c===t?Object(m.jsx)("div",{className:"msg msg--send",children:Object(m.jsx)("div",{className:"msg__bubble msg__bubble--send",children:Object(m.jsx)("p",{className:"msg__text",children:Se.a.emojify(n)})})}):"sparkbot"===c?Object(m.jsx)("div",{className:"msg",children:Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"msg__text msg--announce",children:Se.a.emojify(n)})})}):c!=t&&"sparkbot"!=c?Object(m.jsx)("div",{className:"msg msg--receive",children:Object(m.jsx)("div",{className:"msg__bubble msg__bubble--receive",children:Object(m.jsx)("p",{className:"msg__text",children:Se.a.emojify(n)})})}):null},ke=function(e){var t=e.user,n=e.messages;return Object(m.jsx)(_e.a,{className:"online__messages",children:n.map((function(e,n){return Object(m.jsx)(Ne,{content:e.content,user:t,from:e.from,to:e.to},n)}))})},we=function(e){var t=e.text,n=e.setText,c=e.sendMessage,a=e.prompt,s=void 0===a?"Type a message":a;return Object(m.jsxs)("form",{className:"input--form",onSubmit:c,children:[Object(m.jsx)("input",{autoFocus:!0,className:"textarea--border",type:"text",placeholder:s,value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}}),Object(m.jsx)("button",{type:"Submit",className:"input--button selectable",children:Object(m.jsx)(b.a,{icon:h.a,size:"3x",title:"Enter"})})]})},Ee=function(e){var t=e.mode,n=e.setQuestions,a=Object(c.useState)(""),s=Object(l.a)(a,2),o=s[0],r=s[1],i=Object(c.useState)(""),u=Object(l.a)(i,2),d=u[0],b=u[1],h=Object(c.useState)([]),f=Object(l.a)(h,2),p=f[0],x=f[1],g=Object(j.g)().roomCode,v=Object(j.f)();window.onbeforeunload=function(){ve.emit("leave")},Object(c.useEffect)((function(){return sessionStorage.getItem("userID")&&(sessionStorage.removeItem("userID"),v.push("/")),ve.connect(),ve.emit("join",g),ve.isHost?A.getQuestionsFromCategory(t,5,4,1).then((function(e){n(e),ve.emit("setQuestions",e)})):ve.on("setQuestions",(function(e){n(e)})),ve.on("session",(function(e){var t=e.userID;ve.auth={userID:t},sessionStorage.setItem("userID",t),ve.userID=t,b(t)})),ve.on("message",(function(e){x((function(t){return t.concat(e)}))})),function(){sessionStorage.removeItem("userID"),ve.auth=null,ve.isHost=!1,ve.emit("leave"),ve.off(),v.push("/")}}),[ve]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"online__chat-container",children:[Object(m.jsx)(ke,{user:d,messages:p}),Object(m.jsx)(we,{text:o,setText:r,sendMessage:function(e){e.preventDefault(),o&&(ve.emit("private message",{content:o}),r(""))}})]}),Object(m.jsx)(O,{action:function(){window.confirm("You will not be able to come back, are you sure?")&&v.push("/")}})]})},qe=function(e){var t=e.mode,n=Object(c.useState)(""),a=Object(l.a)(n,2),s=a[0],o=a[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),u=i[0],j=i[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),h=b[0],O=b[1];Object(c.useEffect)((function(){0===u.length?o("loading..."):h>=u.length?o("You've reached the end of the questions!"):o(u[h].question)}),[u,h]),Object(c.useEffect)((function(){ve.on("next",(function(){O((function(e){return e+1}))}))}),[]);var f=function(){ve.emit("nextQuestion")};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ne,{completed:10*h}),Object(m.jsxs)("div",{className:"online__container",children:[Object(m.jsx)("div",{className:"online__question",children:h==u.length?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("span",{className:"card__picture--question",children:[" ",s," "]})}):Object(m.jsxs)(m.Fragment,{children:[u.length>0&&u[h].canPicture?Object(m.jsx)(M,{topic:u[h].topic,data:u[h],isActive:!0,mode:"online"}):Object(m.jsxs)("span",{className:"card__picture--question",children:[" ",s," "]}),Object(m.jsx)("button",{className:"selectable input--button center",onClick:f,children:" Next "})]})},s),Object(m.jsx)(Ee,{mode:t,setQuestions:j})]})]})},Ce=function(){return Object(m.jsx)("div",{className:"menu__sparklogo--container",children:Object(m.jsx)("img",{src:d,className:"site__sparklogo",alt:"SPARK logo"})})},Te=function(e){var t=e.setPage,n=e.setMode,a=Object(c.useState)("home"),s=Object(l.a)(a,2),o=s[0],r=s[1];switch(o){case"online":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"menu__router--container",children:[Object(m.jsx)(u.b,{to:"/create",onClick:function(){t("create"),n("online-room")},children:Object(m.jsx)(y,{title:"Create",subtitle:"Create your unique room"},"Create")}),Object(m.jsx)(u.b,{to:"/join",onClick:function(){t("join"),n("online-room")},children:Object(m.jsx)(y,{title:"Join",subtitle:"Join an existing room"},"Join")}),Object(m.jsx)(u.b,{to:"/random",onClick:function(){t("random"),n("online-stranger")},children:Object(m.jsx)(y,{title:"Random",subtitle:"Join a random room"},"Random")})]}),Object(m.jsx)("div",{className:"menu__navigation--container",children:Object(m.jsx)(O,{action:function(){return r("player")}})})]});case"mode":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"menu__router--container",children:[Object(m.jsx)(u.b,{to:"/game",onClick:function(){t("game"),n("story")},children:Object(m.jsx)(y,{title:"Story (2 player)",subtitle:"10 progressive questions for 2 players!"},"Story")}),Object(m.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("icebreakers")},children:[" ",Object(m.jsx)(y,{title:"Icebreakers",subtitle:"Get to know anyone!"},"Icebreakers")," "]}),Object(m.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("deep")},children:[" ",Object(m.jsx)(y,{title:"Deep Questions",subtitle:"Go deep!"},"Deep")," "]}),Object(m.jsxs)(u.b,{to:"/game",onClick:function(){t("game"),n("this-or-that")},children:[" ",Object(m.jsx)(y,{title:"This or That",subtitle:"Which will you choose?"},"ThisOrThat")," "]})]}),Object(m.jsx)("div",{className:"menu__navigation--container",children:Object(m.jsx)(O,{action:function(){return r("player")}})})]});case"player":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"menu__router--container",children:[Object(m.jsxs)(u.b,{to:"/solo",onClick:function(){t("solo"),n("solo")},children:[" ",Object(m.jsx)(y,{title:"Solo",subtitle:"Daily self reflection"},"Solo")," "]}),Object(m.jsxs)(u.b,{to:"/",onClick:function(){return r("mode")},children:[" ",Object(m.jsx)(y,{title:"Group",subtitle:"Questions for sharing"},"Group")," "]}),Object(m.jsxs)(u.b,{to:"/",onClick:function(){return r("online")},children:[" ",Object(m.jsx)(y,{title:"Online",subtitle:"Play with friends or strangers"},"Online")," "]})]}),Object(m.jsx)("div",{className:"menu__navigation--container",children:Object(m.jsx)(O,{action:function(){return r("home")}})})]});default:return Object(m.jsxs)("div",{className:"menu__router--container",children:[Object(m.jsxs)(u.b,{to:"/",onClick:function(){return r("player")},children:[" ",Object(m.jsx)(y,{title:"Play",subtitle:"Spark meaningful conversations!"},"Play")," "]}),Object(m.jsxs)(u.b,{to:"/profile",onClick:function(){t("profile"),n("profile")},children:[" ",Object(m.jsx)(y,{title:"Profile",subtitle:"Your favourited cards & Journey"},"Profile")," "]}),Object(m.jsxs)(u.b,{to:"/about",onClick:function(){return t("about")},children:[" ",Object(m.jsx)(y,{title:"About"},"About")," "]})]})}},Fe=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(j.f)();Object(c.useEffect)((function(){ve.connect()}),[]);return Object(m.jsxs)("div",{className:"online__container",children:[Object(m.jsx)(Ce,{}),Object(m.jsxs)("div",{className:"join__container",children:[Object(m.jsx)("h1",{children:"Join Room"}),Object(m.jsx)(we,{text:n,setText:a,sendMessage:function(e){e.preventDefault(),ve.emit("joining",n,(function(e){var t=e.error;t?alert(t):s.push("/online/".concat(n))}))},prompt:"Enter room code"})]}),Object(m.jsx)(O,{})]})},Ie="https://sparkorbital.herokuapp.com",De=function(){var e=Object(c.useState)("loading..."),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(j.f)();Object(c.useEffect)((function(){ve.connect(),ve.emit("create"),ve.once("create",(function(e){a(e)})),ve.once("joining",(function(e){ve.isHost=!0,s.push("/online/".concat(e))}))}),[]);return Object(m.jsxs)("div",{className:"online__container",children:[Object(m.jsx)(Ce,{}),Object(m.jsx)("h1",{children:"Create Room"}),"Your room code is",Object(m.jsx)("h1",{children:n}),"Copy this URL to share with your friends:",Object(m.jsxs)("span",{className:"selectable selectable-text",onClick:function(){navigator.clipboard.writeText("".concat(Ie,"/online/").concat(n)).then((function(){Object($.b)("Copied URL!",{duration:1500,position:"top"})}))},children:[" ",Object(m.jsx)("em",{children:"".concat(Ie,"/online/").concat(n)})," "]}),Object(m.jsx)("br",{}),"The room will start once one other player joins",Object(m.jsx)(O,{}),Object(m.jsx)($.a,{})]})},Me=function(){var e=Object(j.f)();window.onbeforeunload=function(){ve.emit("leaveWaiting")},Object(c.useEffect)((function(){return ve.connect(),ve.emit("waiting",null,(function(t){t&&(ve.isHost=!0,e.push("/online/".concat(t)))})),ve.once("joining",(function(t){e.push("/online/".concat(t))})),function(){ve.emit("leaveWaiting")}}),[]);return Object(m.jsxs)("div",{className:"online__container",children:[Object(m.jsx)(Ce,{}),Object(m.jsx)("h1",{className:"loading",children:"Waiting for players"}),Object(m.jsx)("br",{}),"The room will start once one other player joins.",Object(m.jsx)("br",{}),Object(m.jsx)(O,{action:function(){ve.emit("leaveWaiting"),e.goBack()}})]})},Re=function(e){var t=e.data;return t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:" My Journey "}),Object(m.jsxs)("div",{className:"profile__container entry",children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"profile__journey-entry--title",children:[" ",t.question," "]}),Object(m.jsxs)("p",{className:"profile__journey-entry--date",children:[" ",x.timestampToString(t.timestamp)," "]}),t.picture?Object(m.jsx)("div",{className:"profile__journey-entry--pic-container",children:Object(m.jsx)("img",{src:t.picture.pic.urls.small,className:"profile__journey-entry--pic"})}):null]}),Object(m.jsxs)("p",{className:"profile__journey-entry--reflection",children:[t.reflection," "]})]})]}):null},Je=Object(o.b)((function(e){return{journey:e.solo.journey}}))((function(e){var t=e.dispatch,n=e.journey,a=Object(j.g)().id;return Object(c.useEffect)((function(){t(X())}),[t]),Object(m.jsxs)("div",{children:[Object(m.jsx)(Re,{data:n[a]}),Object(m.jsx)("div",{className:"menu__navigation--container",children:Object(m.jsx)(O,{})})]})})),Ae=function(){var e=Object(c.useState)("home"),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)("none"),s=Object(l.a)(a,2),o=s[0],r=s[1],i=function(e){n(e)};return Object(c.useEffect)((function(){localStorage.getItem("m3")||(localStorage.setItem("solo_index","0"),localStorage.removeItem("solo_questions"),localStorage.setItem("m3","true"))}),[]),Object(m.jsx)(u.a,{children:Object(m.jsx)("div",{className:"site__container",children:Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{path:"/online/:roomCode",children:Object(m.jsx)("div",{className:"game__container",children:Object(m.jsx)(qe,{mode:o})})}),Object(m.jsx)(j.a,{path:"/random",children:Object(m.jsx)("div",{className:"game__container",children:Object(m.jsx)(Me,{})})}),Object(m.jsx)(j.a,{path:"/join",children:Object(m.jsx)("div",{className:"game__container",children:Object(m.jsx)(Fe,{})})}),Object(m.jsx)(j.a,{path:"/create",children:Object(m.jsx)("div",{className:"game__container",children:Object(m.jsx)(De,{})})}),Object(m.jsx)(j.a,{path:"/game",children:Object(m.jsx)("div",{className:"game__container",children:Object(m.jsx)(he,{mode:o})})}),Object(m.jsx)(j.a,{path:"/solo",children:Object(m.jsx)(ee,{setMode:r})}),Object(m.jsx)(j.a,{path:"/about",children:Object(m.jsx)("div",{className:"menu__content--container",children:Object(m.jsxs)("div",{className:"menu__content--data",children:[Object(m.jsx)(Ce,{}),Object(m.jsx)(pe,{})]})})}),Object(m.jsx)(j.a,{path:"/profile/:id",children:Object(m.jsx)("div",{className:"menu__content--container",children:Object(m.jsx)("div",{className:"menu__content--data",children:Object(m.jsx)(Je,{})})})}),Object(m.jsx)(j.a,{path:"/profile",children:Object(m.jsx)("div",{className:"menu__content--container",children:Object(m.jsx)("div",{className:"menu__content--data",children:Object(m.jsx)(fe,{mode:o,setPage:i,setMode:r})})})}),Object(m.jsx)(j.a,{path:"/",children:Object(m.jsx)("div",{className:"menu__content--container",children:Object(m.jsxs)("div",{className:"menu__content--data",children:[Object(m.jsx)(Ce,{}),Object(m.jsx)(Te,{setPage:i,setMode:r})]})})})]})})})},Qe=Object(s.combineReducers)({questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case se:return{questions:t.payload,loading:!1,hasErrors:!1};case oe:return Object(S.a)(Object(S.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},solo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case P:return Object(S.a)(Object(S.a)({},e),{},{soloReady:!0,loading:!1});case Y:return Object(S.a)(Object(S.a)({},e),{},{soloReady:!1,loading:!1});case U:return Object(S.a)(Object(S.a)({},e),{},{loading:!1,questions:t.payload});case W:return Object(S.a)(Object(S.a)({},e),{},{loading:!1,hasErrors:!0});case H:return Object(S.a)(Object(S.a)({},e),{},{journey:t.payload});case L:return Object(S.a)(Object(S.a)({},e),{},{hasErrors:!0});default:return e}}}),Pe=Object(s.createStore)(Qe,Object(i.composeWithDevTools)(Object(s.applyMiddleware)(r.a)));Object(a.render)(Object(m.jsx)(o.a,{store:Pe,children:Object(m.jsx)(Ae,{})}),document.getElementById("root"))}},[[422,1,2]]]);
//# sourceMappingURL=main.cb6ccc70.chunk.js.map